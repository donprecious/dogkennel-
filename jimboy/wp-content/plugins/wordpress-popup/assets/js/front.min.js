!function(s){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(t,e,i){n.Backbone=s(n,i,t,e)});else if("undefined"!=typeof exports){var t,e=require("underscore");try{t=require("jquery")}catch(t){}s(n,exports,e,t)}else n.Backbone=s(n,{},n._,n.jQuery||n.Zepto||n.ender||n.$)}(function(t,l,b,e){var i=t.Backbone,o=Array.prototype.slice;l.VERSION="1.3.3",l.$=e,l.noConflict=function(){return t.Backbone=i,this},l.emulateHTTP=!1,l.emulateJSON=!1;var s=function(i,t,s){b.each(t,function(t,e){b[e]&&(i.prototype[e]=function(t,s,n){switch(t){case 1:return function(){return b[s](this[n])};case 2:return function(t){return b[s](this[n],t)};case 3:return function(t,e){return b[s](this[n],a(t,this),e)};case 4:return function(t,e,i){return b[s](this[n],a(t,this),e,i)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),b[s].apply(b,t)}}}(t,e,s))})},a=function(e,t){return b.isFunction(e)?e:b.isObject(e)&&!t._isModel(e)?n(e):b.isString(e)?function(t){return t.get(e)}:e},n=function(t){var e=b.matches(t);return function(t){return e(t.attributes)}},r=l.Events={},d=/\s+/,c=function(t,e,i,s,n){var o,a=0;if(i&&"object"==typeof i){void 0!==s&&"context"in n&&void 0===n.context&&(n.context=s);for(o=b.keys(i);a<o.length;a++)e=c(t,e,o[a],i[o[a]],n)}else if(i&&d.test(i))for(o=i.split(d);a<o.length;a++)e=t(e,o[a],s,n);else e=t(e,i,s,n);return e};r.on=function(t,e,i){return u(this,t,e,i)};var u=function(t,e,i,s,n){(t._events=c(h,t._events||{},e,i,{context:s,ctx:t,listening:n}),n)&&((t._listeners||(t._listeners={}))[n.id]=n);return t};r.listenTo=function(t,e,i){if(!t)return this;var s=t._listenId||(t._listenId=b.uniqueId("l")),n=this._listeningTo||(this._listeningTo={}),o=n[s];if(!o){var a=this._listenId||(this._listenId=b.uniqueId("l"));o=n[s]={obj:t,objId:s,id:a,listeningTo:n,count:0}}return u(t,e,i,this,o),this};var h=function(t,e,i,s){if(i){var n=t[e]||(t[e]=[]),o=s.context,a=s.ctx,r=s.listening;r&&r.count++,n.push({callback:i,context:o,ctx:o||a,listening:r})}return t};r.off=function(t,e,i){return this._events&&(this._events=c(_,this._events,t,e,{context:i,listeners:this._listeners})),this},r.stopListening=function(t,e,i){var s=this._listeningTo;if(!s)return this;for(var n=t?[t._listenId]:b.keys(s),o=0;o<n.length;o++){var a=s[n[o]];if(!a)break;a.obj.off(e,i,this)}return this};var _=function(t,e,i,s){if(t){var n,o=0,a=s.context,r=s.listeners;if(e||i||a){for(var l=e?[e]:b.keys(t);o<l.length;o++){var d=t[e=l[o]];if(!d)break;for(var c=[],u=0;u<d.length;u++){var h=d[u];i&&i!==h.callback&&i!==h.callback._callback||a&&a!==h.context?c.push(h):(n=h.listening)&&0==--n.count&&(delete r[n.id],delete n.listeningTo[n.objId])}c.length?t[e]=c:delete t[e]}return t}for(var _=b.keys(r);o<_.length;o++)delete r[(n=r[_[o]]).id],delete n.listeningTo[n.objId]}};r.once=function(t,e,i){var s=c(p,{},t,e,b.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(s,e,i)},r.listenToOnce=function(t,e,i){var s=c(p,{},e,i,b.bind(this.stopListening,this,t));return this.listenTo(t,s)};var p=function(t,e,i,s){if(i){var n=t[e]=b.once(function(){s(e,n),i.apply(this,arguments)});n._callback=i}return t};r.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),s=0;s<e;s++)i[s]=arguments[s+1];return c(m,this._events,t,void 0,i),this};var m=function(t,e,i,s){if(t){var n=t[e],o=t.all;n&&o&&(o=o.slice()),n&&f(n,s),o&&f(o,[e].concat(s))}return t},f=function(t,e){var i,s=-1,n=t.length,o=e[0],a=e[1],r=e[2];switch(e.length){case 0:for(;++s<n;)(i=t[s]).callback.call(i.ctx);return;case 1:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o);return;case 2:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a);return;case 3:for(;++s<n;)(i=t[s]).callback.call(i.ctx,o,a,r);return;default:for(;++s<n;)(i=t[s]).callback.apply(i.ctx,e);return}};r.bind=r.on,r.unbind=r.off,b.extend(l,r);var g=l.Model=function(t,e){var i=t||{};e||(e={}),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var s=b.result(this,"defaults");i=b.defaults(b.extend({},s,i),s),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};b.extend(g.prototype,r,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return b.clone(this.attributes)},sync:function(){return l.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return b.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!b.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var s;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;var n=i.unset,o=i.silent,a=[],r=this._changing;this._changing=!0,r||(this._previousAttributes=b.clone(this.attributes),this.changed={});var l=this.attributes,d=this.changed,c=this._previousAttributes;for(var u in s)e=s[u],b.isEqual(l[u],e)||a.push(u),b.isEqual(c[u],e)?delete d[u]:d[u]=e,n?delete l[u]:l[u]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!o){a.length&&(this._pending=i);for(var h=0;h<a.length;h++)this.trigger("change:"+a[h],this,l[a[h]],i)}if(r)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,b.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,b.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!b.isEmpty(this.changed):b.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&b.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var s in t){var n=t[s];b.isEqual(e[s],n)||(i[s]=n)}return!!b.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(i){i=b.extend({parse:!0},i);var s=this,n=i.success;return i.success=function(t){var e=i.parse?s.parse(t,i):t;if(!s.set(e,i))return!1;n&&n.call(i.context,s,t,i),s.trigger("sync",s,t,i)},A(this,i),this.sync("read",this,i)},save:function(t,e,i){var s;null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e;var n=(i=b.extend({validate:!0,parse:!0},i)).wait;if(s&&!n){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;var o=this,a=i.success,r=this.attributes;i.success=function(t){o.attributes=r;var e=i.parse?o.parse(t,i):t;if(n&&(e=b.extend({},s,e)),e&&!o.set(e,i))return!1;a&&a.call(i.context,o,t,i),o.trigger("sync",o,t,i)},A(this,i),s&&n&&(this.attributes=b.extend({},r,s));var l=this.isNew()?"create":i.patch?"patch":"update";"patch"!==l||i.attrs||(i.attrs=s);var d=this.sync(l,this,i);return this.attributes=r,d},destroy:function(e){e=e?b.clone(e):{};var i=this,s=e.success,n=e.wait,o=function(){i.stopListening(),i.trigger("destroy",i,i.collection,e)},t=!(e.success=function(t){n&&o(),s&&s.call(e.context,i,t,e),i.isNew()||i.trigger("sync",i,t,e)});return this.isNew()?b.defer(e.success):(A(this,e),t=this.sync("delete",this,e)),n||o(),t},url:function(){var t=b.result(this,"urlRoot")||b.result(this.collection,"url")||B();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},b.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=b.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,b.extend(e,{validationError:i})),!1)}});s(g,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var v=l.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,b.extend({silent:!0},e))},x={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},k=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var s,n=Array(t.length-i),o=e.length;for(s=0;s<n.length;s++)n[s]=t[s+i];for(s=0;s<o;s++)t[s+i]=e[s];for(s=0;s<n.length;s++)t[s+o+i]=n[s]};b.extend(v.prototype,r,{model:g,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return l.sync.apply(this,arguments)},add:function(t,e){return this.set(t,b.extend({merge:!1},e,y))},remove:function(t,e){e=b.extend({},e);var i=!b.isArray(t);t=i?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),i?s[0]:s},set:function(t,e){if(null!=t){(e=b.extend({},x,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!b.isArray(t);t=i?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var n,o,a=[],r=[],l=[],d=[],c={},u=e.add,h=e.merge,_=e.remove,p=!1,m=this.comparator&&null==s&&!1!==e.sort,f=b.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){n=t[o];var g=this.get(n);if(g){if(h&&n!==g){var v=this._isModel(n)?n.attributes:n;e.parse&&(v=g.parse(v,e)),g.set(v,e),l.push(g),m&&!p&&(p=g.hasChanged(f))}c[g.cid]||(c[g.cid]=!0,a.push(g)),t[o]=g}else u&&(n=t[o]=this._prepareModel(n,e))&&(r.push(n),this._addReference(n,e),c[n.cid]=!0,a.push(n))}if(_){for(o=0;o<this.length;o++)c[(n=this.models[o]).cid]||d.push(n);d.length&&this._removeModels(d,e)}var y=!1,w=!m&&u&&_;if(a.length&&w?(y=this.length!==a.length||b.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,k(this.models,a,0),this.length=this.models.length):r.length&&(m&&(p=!0),k(this.models,r,null==s?this.length:s),this.length=this.models.length),p&&this.sort({silent:!0}),!e.silent){for(o=0;o<r.length;o++)null!=s&&(e.index=s+o),(n=r[o]).trigger("add",n,this,e);(p||y)&&this.trigger("sort",this,e),(r.length||d.length||l.length)&&(e.changes={added:r,removed:d,merged:l},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?b.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,b.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,b.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,b.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return b.isFunction(e)&&(e=b.bind(e,this)),1===i||b.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(i){var s=(i=b.extend({parse:!0},i)).success,n=this;return i.success=function(t){var e=i.reset?"reset":"set";n[e](t,i),s&&s.call(i.context,n,t,i),n.trigger("sync",n,t,i)},A(this,i),this.sync("read",this,i)},create:function(t,e){var s=(e=e?b.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;s||this.add(t,e);var n=this,o=e.success;return e.success=function(t,e,i){s&&n.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;var i=new(((e=e?b.clone(e):{}).collection=this).model)(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var i=[],s=0;s<t.length;s++){var n=this.get(t[s]);if(n){var o=this.indexOf(n);this.models.splice(o,1),this.length--,delete this._byId[n.cid];var a=this.modelId(n.attributes);null!=a&&delete this._byId[a],e.silent||(e.index=o,n.trigger("remove",n,this,e)),i.push(n),this._removeReference(n,e)}}return i},_isModel:function(t){return t instanceof g},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,s),"change"===t){var n=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);n!==o&&(null!=n&&delete this._byId[n],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});s(v,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var w=l.View=function(t){this.cid=b.uniqueId("view"),b.extend(this,b.pick(t,O)),this._ensureElement(),this.initialize.apply(this,arguments)},C=/^(\S+)\s*(.*)$/,O=["model","collection","el","id","attributes","className","tagName","events"];b.extend(w.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof l.$?t:l.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=b.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var i=t[e];if(b.isFunction(i)||(i=this[i]),i){var s=e.match(C);this.delegate(s[1],s[2],b.bind(i,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var t=b.extend({},b.result(this,"attributes"));this.id&&(t.id=b.result(this,"id")),this.className&&(t.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),l.sync=function(t,e,s){var i=E[t];b.defaults(s||(s={}),{emulateHTTP:l.emulateHTTP,emulateJSON:l.emulateJSON});var n={type:i,dataType:"json"};if(s.url||(n.url=b.result(e,"url")||B()),null!=s.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(n.contentType="application/json",n.data=JSON.stringify(s.attrs||e.toJSON(s))),s.emulateJSON&&(n.contentType="application/x-www-form-urlencoded",n.data=n.data?{model:n.data}:{}),s.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){n.type="POST",s.emulateJSON&&(n.data._method=i);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",i),o)return o.apply(this,arguments)}}"GET"===n.type||s.emulateJSON||(n.processData=!1);var a=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,a&&a.call(s.context,t,e,i)};var r=s.xhr=l.ajax(b.extend(n,s));return e.trigger("request",e,r,s),r};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};l.ajax=function(){return l.$.ajax.apply(l.$,arguments)};var I=l.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,T=/\*\w+/g,j=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(I.prototype,r,{initialize:function(){},route:function(i,s,n){b.isRegExp(i)||(i=this._routeToRegExp(i)),b.isFunction(s)&&(n=s,s=""),n||(n=this[s]);var o=this;return l.history.route(i,function(t){var e=o._extractParameters(i,t);!1!==o.execute(n,e,s)&&(o.trigger.apply(o,["route:"+s].concat(e)),o.trigger("route",s,e),l.history.trigger("route",o,s,e))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,e){return l.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var t,e=b.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(j,"\\$&").replace(S,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return b.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var P=l.History=function(){this.handlers=[],this.checkUrl=b.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},M=/^[#\/]|\s+$/g,H=/^\/+|\/+$/g,N=/#.*$/;P.started=!1,b.extend(P.prototype,r,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(M,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=b.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(H,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,s=i.insertBefore(this.iframe,i.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var n=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?n("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?n("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),b.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(t,e){if(!P.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var s=i+t;if(t=this.decodeFragment(t.replace(N,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,s);else{if(!this._wantsHashChange)return this.location.assign(s);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var n=this.iframe.contentWindow;e.replace||(n.document.open(),n.document.close()),this._updateHash(n.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var s=t.href.replace(/(javascript:|#).*$/,"");t.replace(s+"#"+e)}else t.hash="#"+e}}),l.history=new P;g.extend=v.extend=I.extend=w.extend=P.extend=function(t,e){var i,s=this;return i=t&&b.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},b.extend(i,s,e),i.prototype=b.create(s.prototype,t),(i.prototype.constructor=i).__super__=s.prototype,i};var B=function(){throw new Error('A "url" property or function must be specified')},A=function(e,i){var s=i.error;i.error=function(t){s&&s.call(i.context,e,t,i),e.trigger("error",e,t,i)}};return l}),function(t){"use strict";var r,l,d,i,s,e,n,o,a;window.Hustle=(r=jQuery,l=document,d=window,i={},s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},e=_.extend({},Backbone.Events),n=Backbone.View.extend({__base_events:{"click .wph-tabs--wrap .wph-tabs--nav li label":"__base_toggle_tab"},initialize:function(){this.events=_.extend({},this.events,this.__base_events),_.isFunction(this.init_mix)&&this.init_mix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(t){this.trigger("before_render"),t.call(this),e.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)},__base_toggle_tab:function(t){var e=this.$(t.target),i=(e.attr("href")||"").replace(/^\#/,""),s=!!i&&this.$("#"+i),n=e.closest(".wph-tabs--wrap"),o=e.closest("li");s&&s.length&&(n.find(".wph-tabs--content").not(s).removeClass("current"),s.addClass("current"),o.addClass("current"),o.siblings().removeClass("current"))}}),o=_.memoize(function(e){var i;return function(t){return(i=i||_.template(document.getElementById(e).innerHTML,null,s))(t).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),a=_.memoize(function(e){var i;return function(t){return(i=i||_.template(e,null,s))(t)}}),{define:function(t,o){if(t.split(".").length){var a=function(t,e){var i=t.split("."),s=i.splice(0,1)[0];if(s){if(i.length)e[s]=e[s]||{};else{var n=o.call(null,r,l,d);e[s]=_.isFunction(n)||void 0===n?n:_.extend(e[s]||{},n)}i.length&&s&&a(i.join("."),e[s])}};a(t,i)}else{var e=i[t]||{};i[t]=_.extend(e,o.call(null,r,l,d))}},get_modules:function(){return i},get:function(t){if(t.split(".").length){var n=!1,o=function(t,e){var i=t.split("."),s=i.splice(0,1)[0];n=e[s],i.length&&o(i.join("."),e[s])};return o(t,i),n}return i[t]||!1},Events:e,View:n,template:o,create_template:a,get_template_options:function(){return r.extend(!0,{},s)},cookie:{set:function(t,e,i){var s,n;e=r.isArray(e)||r.isPlainObject(e)?JSON.stringify(e):e,isNaN(i)?n="":((s=new Date).setTime(s.getTime()+24*i*60*60*1e3),n="; expires="+s.toGMTString()),document.cookie=t+"="+e+n+"; path=/"},get:function(t){var e,i,s,n=document.cookie.split(";");for(s=t+"=",e=0;e<n.length;e+=1){for(i=n[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(s)){var o=i.substring(s.length,i.length);return o?JSON.parse(o):o}}return null}},consts:{Module_Show_Count:"hustle_module_show_count-"}})}(jQuery),(Optin=Optin||{}).View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(n){"use strict";Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.SLIDE_IN_COOKIE_HIDE_ALL="inc_optin_slide_in_hide_all",Optin.EMBEDDED_COOKIE_PREFIX="inc_optin_embedded_long_hidden-",Optin.global_mixin=function(){_.mixin({log:function(){console.log(arguments)},toBool:function(t){return _.isBoolean(t)?t:_.isString(t)&&-1!==["true","false","1"].indexOf(t.toLowerCase())?"true"===t.toLowerCase()||"1"===t.toLowerCase():_.isNumber(t)?!!t:!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&t},isTrue:function(t){return!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&(_.isNumber(t)?0!==t:(t=t.toString().toLowerCase(),-1!==["1","true","on"].indexOf(t)))},isFalse:function(t){return!_.isTrue(t)},control_base:function(t,e,i){return i=_.isUndefined(i)?"checked":i,t=_.toBool(t),e=_.isBoolean(t)?_.isTrue(e):e,_.isEqual(t,e)?i+"="+i:""},checked:function(t,e){return _.control_base(t,e,"checked")},selected:function(t,e){return _.control_base(t,e,"selected")},disabled:function(t,e){return _.control_base(t,e,"disabled")},class:function(t,e,i){return _.isTrue(t)?e:void 0!==i?i:""},add_class:function(t,e,i){return"class={class}".replace("{class}",_.class(t,e,i))},toUpperCase:function(t){return _.isString(t)?t.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(t,e,i){e=cb(e,i);for(var s,n=_.keys(t),o=0,a=n.length;o<a;o++)if(e(t[s=n[o]],s,t))return s}})},Optin.global_mixin(),Backbone.Model.prototype.toJSON=function(){var t=_.clone(this.attributes);for(var e in t)(t[e]instanceof Backbone.Model||Backbone.Collection&&t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},String.prototype.toInt=function(){return parseInt(this,10)},String.prototype.isEmpty=function(){return 0===this.length||!this.trim()},Optin.template=_.memoize(function(e){var i,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(t){return(i=i||_.template(n("#"+e).html(),null,s))(t).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.template_compat=_.memoize(function(e){var i;return function(t){return(i=i||_.template(n("#"+e).html()))(t).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.cookie=Hustle.cookie,n(document).on("blur","input, textarea, select",function(){var t=n(this);t.is(":input[type=button], :input[type=submit], :input[type=reset]")||(t.val()&&t.val().trim&&""!==t.val().trim()?t.parent().addClass("hustle-input-filled"):t.parent().removeClass("hustle-input-filled"))}),Optin.Mixins={_mixins:{},_services_mixins:{},_desing_mixins:{},_display_mixins:{},add:function(t,e){this._mixins[t]=e},get_mixins:function(){return this._mixins},add_services_mixin:function(t,e){this._services_mixins[t]=e},get_services_mixins:function(){return this._services_mixins}}}(jQuery),Hustle.define("Modal_Email",function(o){"use strict";var e={};return Backbone.View.extend({id:"wph-modal-email",className:"wpmudev-modal",template:Optin.template("hustle-modal-email-tpl"),list_header_template:Optin.template("wpoi-email-list-header-tpl"),list_template:Optin.template("wpoi-emails-list-tpl"),show_delay:350,events:{"click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide"},initialize:function(){return this.render()},render:function(){var n=this,t=this.template(this.model);return t=(t=t.replace("__id",this.model.id)).replace("__type",this.model.type),this.$el.html(t),e[this.model.id]||(e[this.model.id]=o.ajax({url:ajaxurl,type:"GET",data:{action:"hustle_get_email_lists",id:n.model.id,_ajax_nonce:o("#hustle_get_emails_list_nonce").val()}}),this.delay_show=0),e[this.model.id].then(function(t){if(t.success){var e=t.data.module_fields,i=[];n.model.module_fields.length||(n.model.module_fields=e,n.$(".wpmudev-listing-head").html(n.list_header_template({module_fields:e})),_.each(e,function(t){i.push({name:t.name,label:t.label})}));var s=n.list_template({subscriptions:t.data.subscriptions,module_fields:i});n.$(".wpmudev-listing-body").html(s)}}),this.$el.appendTo("#wpmudev-hustle"),this.show(),this},show:function(){o("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},close:function(t){t.preventDefault(),this.$el.removeClass("show"),_.delay(function(){this.remove()}.bind(this),350)},hide:function(t){var e=o(t.target),i=this.$el.find(".wpmudev-box-modal"),s=this;(e.hasClass("wpmudev-modal-mask")||e.hasClass("wpmudev-i_close")||e.parent().hasClass("wpmudev-i_close"))&&(i.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){s.$el.removeClass("wpmudev-modal-active"),o("body").removeClass("wpmudev-modal-is_active"),i.removeClass("wpmudev-hide")},500))}})}),Hustle.define("Modal_Error",function(n){"use strict";var s=Backbone.View.extend({template:Optin.template("hustle-error-list-tpl"),className:"wpmudev-listing-row",controller:!1,initialize:function(t){this.controller=t.controller,this.module_fields=t.module_fields,this.render()},render:function(){var t=this.template({model:this.model,module_fields:this.module_fields});this.$el.html(t),this.$el.appendTo(this.controller.$(".wpmudev-listing-body"))}});return Backbone.View.extend({id:"wph-modal-error",template:Optin.template("hustle-modal-error-tpl"),list_header_template:Optin.template("hustle-error-header-list-tpl"),className:"wpmudev-modal",events:{"click .inc-opt-close-error-list":"toggleErrorLog","click .wpmudev-button-clear-logs":"clearLogs","click .wpmudev-button-delete-logs":"_clean","click .wpmudev-button-cancel-delete-logs":"cancelDelete","click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide"},initialize:function(t){return this.$el.html(this.template({id:this.model.id})),this.button=t.button,this.render()},render:function(){var i=this,t=this.template(this.model);return t=(t=t.replace("__id",this.model.id)).replace("__type",this.model.type),this.clearLogButton=this.$(".wpmudev-button-clear-logs"),this.exportButton=this.$(".wpmudev-button-download-csv"),this.deleteConfirmation=this.$(".hustle-delete-logs-confirmation"),n.getJSON(window.ajaxurl,{id:this.model.id,_wpnonce:optin_vars.error_log_nonce,action:"get_error_list"},function(t){if(t.success&&t.data&&t.data.logs){var e=t.data.module_fields;i.model.module_fields=e,i.$(".wpmudev-listing-head").html(i.list_header_template({module_fields:e})),_.each(t.data.logs,function(t){new s({module_fields:e,model:t,controller:i})}),i.show()}}),this.$el.html(t),0<n("#wph-modal-error").length?n("#wph-modal-error").html(this.$el):this.$el.appendTo("#wpmudev-hustle"),this.show(),this},show:function(){n("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},hide:function(t){var e=n(t.target),i=this.$el.find(".wpmudev-box-modal"),s=this;(e.hasClass("wpmudev-modal-mask")||e.hasClass("wpmudev-i_close")||e.parent().hasClass("wpmudev-i_close"))&&(i.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){s.$el.removeClass("wpmudev-modal-active"),n("body").removeClass("wpmudev-modal-is_active"),i.removeClass("wpmudev-hide")},500))},toggleErrorLog:function(){this.$el.removeClass("show")},clearLogs:function(t){n(t.target).parents(".wpmudev-footer-clear").find(".hustle-delete-logs-confirmation").removeClass("wpmudev-hidden"),this.clearLogButton.attr("disabled",!0),this.exportButton.attr("disabled",!0)},_clean:function(){var e=this;n.get(window.ajaxurl,{id:this.model.id,_wpnonce:optin_vars.clear_log_nonce,action:"clear_logs"},function(t){t.success&&(e.toggleErrorLog(),_.delay(function(){e.button.remove(),e.remove()},350))})},cancelDelete:function(t){n(t.target).parents(".hustle-delete-logs-confirmation").addClass("wpmudev-hidden"),this.clearLogButton.removeAttr("disabled"),this.exportButton.removeAttr("disabled")}})}),Hustle.define("Modal_Import",function(n){"use strict";return Backbone.View.extend({id:"wph-modal-import",className:"wpmudev-modal",template:Optin.template("hustle-modal-import-tpl"),show_delay:350,events:{"click .wpmudev-button-confirm-import":"import","click .wpmudev-button-cancel-import":"cancelImport","click .wpmudev-modal-mask, .wpmudev-i_close, .wpmudev-i_close path":"hide","click #wpmudev-button-import":"preImport"},initialize:function(){return this.render()},render:function(){var t=this.template(this.model);return this.importButton=this.$("#wpmudev-button-import"),this.$el.html(t),this.$el.appendTo("#wpmudev-hustle"),this.show(),this},cancelImport:function(t){n(t.target).parents(".hustle-confirmation").addClass("wpmudev-hidden"),this.importButton.prop("disabled",!1)},preImport:function(t){n("#wph-optin-service-import-form input").val()&&(n(t.target).parents(".wpmudev-box-footer").find(".hustle-confirmation").removeClass("wpmudev-hidden"),this.importButton.prop("disabled",!0))},import:function(t){var e,i=n(t.target),s=n("#wph-optin-service-import-form input[type=file]").get(0).files[0];(e=new FormData).append("action","hustle_import_module"),e.append("id",i.data("id")),e.append("type",i.data("type")),e.append("_ajax_nonce",i.data("nonce")),e.append("file",s),n.ajax({url:ajaxurl,type:"POST",data:e,cache:!1,processData:!1,contentType:!1,success:function(t){t.success?location.reload():(n("#import_error").html(n("<label><span>"+t.data+"</span></label>").prop({class:"wpmudev-label--notice"})),n("#import_error label").delay(5e3).fadeOut("slow",function(){n(this).remove()}))}})},show:function(){n("body").addClass("wpmudev-modal-is_active"),this.$el.addClass("wpmudev-modal-active"),this.$el.find(".wpmudev-box-modal").addClass("wpmudev-show").removeClass("wpmudev-hide")},hide:function(t){var e=n(t.target),i=this.$el.find(".wpmudev-box-modal"),s=this;(e.hasClass("wpmudev-modal-mask")||e.hasClass("wpmudev-i_close")||e.parent().hasClass("wpmudev-i_close"))&&(i.removeClass("wpmudev-show").addClass("wpmudev-hide"),setTimeout(function(){s.$el.removeClass("wpmudev-modal-active"),n("body").removeClass("wpmudev-modal-is_active"),i.removeClass("wpmudev-hide")},500))}})}),function(t){"use strict";var r=window.Optin||{};r.module_log_view=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=module_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),t(document).on("hustle:module:displayed",function(t,e){if("object"==typeof e){var i=void 0!==e.type?e.type:e.module_type,s=Hustle.consts.Module_Show_Count+i+"-"+e.module_id,n=Hustle.cookie.get(s);Hustle.cookie.set(s,n+1,30);var o=void 0!==e.display_type&&"embedded"===i?e.display_type:i;if(null!=e.tracking_types&&_.isTrue(e.tracking_types[o])&&void 0!==r.module_log_view){var a=new r.module_log_view;a.set("type",o),a.set("module_type",i),a.set("module_id",e.module_id),a.save()}}})}(jQuery),function(f){f(document).on("submit","form.hustle-modal-optin_form",function(t){t.preventDefault();var e,i,s,n,o,a=f(t.target),r=a.find("button"),l=a.closest(".hustle-modal"),d=l.parent(),c=d.data("id"),u=d.data("type"),h=_.find(Modules,function(t,e){return c===parseInt(t.module_id)}),p=_.isTrue(h.test_mode),m=f("<span class='wpoi-submit-failure'>"+inc_opt.l10n.submit_failure+"</span>");if("embedded"!==h.module_type&&"social_sharing"!==h.module_type||_.isObject(h.test_types)&&"undefined"!==h.test_types[u]&&_.isTrue(h.test_types[u])&&(p=!0),a.parent().find(".wpoi-submit-failure").remove(),p)return m.html(inc_opt.l10n.test_cant_submit),void a.append(m);a.data("sending")||(i=p,s=(e=a).find(".required"),n=e.parents(".hustle-modal-body").find(".hustle-modal-gdpr"),f('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" preserveAspectRatio="none" class="hustle-icon hustle-i_warning"><path fill-rule="evenodd" d="M9 18c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9zm.25-3c.69 0 1.25-.56 1.25-1.25s-.56-1.25-1.25-1.25S8 13.06 8 13.75 8.56 15 9.25 15zm-.018-4C8 11 7 3.5 9.232 3.5s1.232 7.5 0 7.5z"/></svg>'),o=[],0<n.length&&!n.prop("checked")&&(n.next().addClass("hustle-modal-optin_error"),o.push(n)),f(".wpoi-field-error").remove(),s.each(function(){var t=f(this),e=t.attr("name")+"_error";if(i)return t.next("label").find(".hustle-i_warning").show(),t.addClass("hustle-modal-optin_error"),o.push(t),o;_.isEmpty(this.value)||t.is("[type='email']")&&!this.value.trim().match(/^[\S]+\@[a-zA-Z0-9\-]+\.[\S]{2,}$/gi)?(t.next("label").find(".hustle-i_warning").show(),t.addClass("hustle-modal-optin_error"),o.push(t)):(t.next("label").find(".hustle-i_warning").hide(),t.removeClass("hustle-modal-optin_error"),f("."+e).remove())}),0!==o.length)||(r.attr("disabled",!0),r.addClass("loading"),a.addClass("loading"),a.data("sending",!0),f.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"module_form_submit",data:{form:a.serialize(),module_id:c,page_type:inc_opt.page_type,page_id:inc_opt.page_id,uri:encodeURI(window.location.href),type:u}},success:function(t){if(t&&t.success){var e;if(void 0!==h.content.after_subscription)"popup"===h.module_type?e=Optin.POPUP_COOKIE_PREFIX+c:"slidein"===h.module_type?e=Optin.SLIDE_IN_COOKIE_PREFIX+c:"embedded"===h.module_type&&(e=Optin.EMBEDDED_COOKIE_PREFIX+c),"no_show_on_post"===h.content.after_subscription?Optin.cookie.set(e+"_success_"+inc_opt.page_id,c):"no_show_all"===h.content.after_subscription&&Optin.cookie.set(e+"_success",c);if("redirect"===h.content.after_successful_submission)window.location.replace(h.content.redirect_url);else{var i=l.find(".hustle-modal-success");if(i.find(".hustle-modal-success_message").html(h.content.success_message),i.addClass("hustle-modal-success_show"),_.isTrue(h.content.auto_close_success_message)){var s=parseInt(h.content.auto_close_time);"minutes"===h.content.auto_close_unit&&(s*=60),s*=1e3,_.delay(function(){var t=l.find(".hustle-modal-close .hustle-icon");0<t.length?t.trigger("click"):i.removeAttr("style"),i.removeClass("hustle-modal-success_show")},s)}}}else{var n="";n=t.data?f.isArray(t.data)?t.data.pop():t.data:inc_opt.l10n.submit_failure,m.html(n||inc_opt.l10n.submit_failure),a.append(m)}},error:function(){a.append(m)},complete:function(){r.attr("disabled",!1),a.removeClass("loading"),r.removeClass("loading"),a.data("sending",!1)}}))}),f(document).on("submit","form.hustle-unsubscribe-form",function(t){t.preventDefault();var e=f(t.target),i=e.find(".hustle-email-section");data=e.serialize(),$button=e.find("button"),$failure=f('<span class="wpoi-submit-failure">'+inc_opt.l10n.submit_failure+"</span>"),$button.attr("disabled",!0),$button.addClass("loading"),e.addClass("loading"),e.find(".wpoi-submit-failure").remove(),f.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"hustle_unsubscribe_form_submission",data:data},success:function(t){t.success&&!0===t.success?(i.hide(),t.data.wrapper&&t.data.html&&e.find(t.data.wrapper).html(t.data.html)):t.data.html&&($failure.html(t.data.html),e.prepend($failure))},error:function(){e.prepend($failure)},complete:function(){$button.attr("disabled",!1),e.removeClass("loading"),$button.removeClass("loading")}})})}(jQuery);var Optin=Optin||{};!function(o,t){"use strict";o.each(["hustle_show","hustle_hide"],function(t,e){var i=o.fn[e];o.fn[e]=function(){return this.trigger(e),i.apply(this,arguments)}});var e=o(".inc_opt_inline_wrap"),i=o(window);o(t).on("hustle:module:displayed",_.debounce(function(t,e){},100,!1)),i.on("scroll resize",_.debounce(function(){var t=i.height(),s=i.scrollTop(),n=s+t;o.each(e,function(){var t=o(this),e=t.outerHeight(),i=t.offset().top;s<=i+e&&i<=n?t.addClass("in-view"):t.removeClass("in-view")})},100,!1)),i.trigger("scroll"),o(document).on("blur","input, textarea, select",function(){var t=o(this);t.is(":input[type=button], :input[type=submit], :input[type=reset]")||(""!==t.val().trim()?t.parent().addClass("hustle-input-filled"):t.parent().removeClass("hustle-input-filled"))}),o(document).on("focus",".wpoi-optin input.required",function(){o(this).next("label").find("i.wphi-font").removeClass("i-error")}),Optin.apply_custom_size=function(t,e){var i=t.content,s=t.design,n=s.style,o=s.form_layout,a=e.find(".hustle-modal"),r=a.find(".hustle-modal-body");if(r.width()<500?r.addClass("hustle-size-small"):r.removeClass("hustle-size-small"),_.isTrue(s.customize_size)){if(a.css({width:s.custom_width+"px","max-width":"none"}),"simple"===n&&_.isFalse(i.use_email_collection)){var l=a.find(".hustle-modal-close").height()+15,d=a.find(".hustle-modal-content");r.css({height:"calc("+s.custom_height+"px - "+l+"px)"}),d.css({height:"calc("+s.custom_height+"px - "+l+"px)","overflow-y":"auto"})}if("minimal"===n&&_.isFalse(i.use_email_collection)){l=a.find(".hustle-modal-close").height()+15;var c=a.find("section"),u=a.find(".hustle-modal-message");if(!_.isTrue(i.has_title)||""===i.title&&""===i.sub_title)h=0;else var h=a.find("header").outerHeight();if(_.isTrue(i.show_cta)&&""!==i.cta_label&&""!==i.cta_url)var p=a.find("footer").innerHeight();else p=0;c.css({height:"calc("+s.custom_height+"px - "+l+"px - "+h+"px - "+p+"px)"}),u.css({height:"calc("+s.custom_height+"px - "+l+"px - "+h+"px - "+p+"px)","overflow-y":"auto"})}if("cabriolet"===n&&_.isFalse(i.use_email_collection)){h=a.find("header").height()+20,c=a.find("section"),u=a.find(".hustle-modal-message");c.css({height:"calc("+s.custom_height+"px - "+h+"px)"}),u.css({height:"calc("+s.custom_height+"px - "+h+"px)","overflow-y":"auto"})}if("one"===o&&_.isTrue(i.use_email_collection)){l=a.find(".hustle-modal-close").height()+15,p=a.find("footer").height();var m=a.find(".hustle-modal-image"),f=(c=a.find("section"),a.find("article"));if(c.css({height:"calc("+s.custom_height+"px - "+l+"px - "+p+"px)"}),c.hasClass("hustle-modal-image_above")||c.hasClass("hustle-modal-image_below")){s.custom_height;c.height()<250?c.css({"overflow-y":"auto"}):f.css({height:"calc("+c.height()+"px - "+m.height()+"px)","overflow-y":"auto"})}else f.css({"max-height":"calc("+s.custom_height+"px - "+l+"px - "+p+"px)","overflow-y":"auto"}),m.css({height:"calc("+s.custom_height+"px - "+l+"px - "+p+"px)"})}if("two"===o&&_.isTrue(i.use_email_collection)){l=a.find(".hustle-modal-close").height()+15,p=a.find("footer").height();var g=a.find(".hustle-modal-body");c=a.find("section"),f=a.find("article");g.css({height:"calc("+s.custom_height+"px - "+l+"px)"}),c.css({height:"calc("+s.custom_height+"px - "+l+"px - "+p+"px)"}),f.css({height:"calc("+s.custom_height+"px - "+l+"px - "+p+"px)","overflow-y":"auto"})}if("three"===o&&_.isTrue(i.use_email_collection)){l=a.find(".hustle-modal-close").height()+15;var v=a.find(".hustle-modal-image").height();f=a.find("article");r.css({height:"calc("+s.custom_height+"px - "+l+"px)"}),f.css({height:"calc("+s.custom_height+"px - "+l+"px - "+v+"px)","overflow-y":"auto"})}if("four"===o&&_.isTrue(i.use_email_collection)){l=a.find(".hustle-modal-close").height()+15,v=a.find(".hustle-modal-image").height();var y=s.custom_height-l-v,w=a.find(".hustle-modal-optin_wrap");f=a.find("article");r.css({height:"calc("+s.custom_height+"px - "+l+"px)"}),f.css({height:"calc("+s.custom_height+"px - "+l+"px)","overflow-y":"auto"}),w.css({height:"calc("+s.custom_height+"px - "+l+"px - "+v+"px)","overflow-y":"auto"}),a.find(".hustle-modal-optin_form").innerHeight()>y&&w.css({"align-items":"flex-start"})}}}}(jQuery,document),function(a,s,n){"use strict";inc_opt.is_upfront||(Optin.Module_log_cta_conversion=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=hustle_cta_converted",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href)},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),Optin.Module=Backbone.View.extend({isCC:!1,display_id:"display",showClass:"wph-modal-active",module_id:"",module_type:"",type:"",settings:{},data:{},appear_after:"time",mask:!1,should_remove:!1,parent:"body",anim_in_time:10,anim_out_time:2e3,viewed:!1,cookie_key:"",events:{click:"click","click .hustle-modal-close .hustle-icon":"close","click button.hustle-modal-close":"close","click .hustle-modal-cta":"cta_clicked"},click:_.noop,initialize:function(t){this.data=t,this.settings=t.settings,this.module_id=t.module_id,this.module_type=t.module_type,this.maskClass="wph-modal-mask wpmudev-modal-mask",this.appear_after=this.settings.triggers.trigger,this.expiration=parseInt(this.settings.expiration,10),this.expiration_days=this.get_expiration_days(),"popup"===this.module_type?this.cookie_key=Optin.POPUP_COOKIE_PREFIX+this.module_id:"slidein"===this.module_type&&(this.cookie_key=Optin.SLIDE_IN_COOKIE_PREFIX+this.module_id),this.triggers={on_time:this.settings.triggers.on_time,on_time_delay:this.settings.triggers.on_time_delay,on_time_unit:this.settings.triggers.on_time_unit,on_scroll:this.settings.triggers.on_scroll,on_scroll_page_percent:parseInt(this.settings.triggers.on_scroll_page_percent),on_scroll_css_selector:this.settings.triggers.on_scroll_css_selector,on_click_element:this.settings.triggers.on_click_element,on_exit_intent_per_session:this.settings.triggers.on_exit_intent_per_session,on_exit_intent_delayed:this.settings.triggers.on_exit_intent_delayed,on_exit_intent_delayed_time:this.settings.triggers.on_exit_intent_delayed_time,on_exit_intent_delayed_unit:this.settings.triggers.on_exit_intent_delayed_unit,on_adblock:this.settings.triggers.on_adblock,on_adblock_delayed:this.settings.triggers.on_adblock_delayed,on_adblock_delayed_time:this.settings.triggers.on_adblock_delayed_time,on_adblock_delayed_unit:this.settings.triggers.on_adblock_delayed_unit},(_.contains(["time","scrolled","adblock"],this.appear_after)||"exit_intent"===this.appear_after&&_.isTrue(this.settings.triggers.on_exit_intent_per_session))&&(this.should_remove=!0),this.should_display()&&this.render()},should_display:function(){var t;return(t="no_show_on_post"===this.settings.after_close?!(0<parseInt(inc_opt.page_id,10))||!_.isTrue(Optin.cookie.get(this.cookie_key+"_"+inc_opt.page_id)):"no_show_all"!==this.settings.after_close||!_.isTrue(Optin.cookie.get(this.cookie_key)))&&("no_show_on_post"===this.data.content.after_subscription?t=!(0<parseInt(inc_opt.page_id,10))||!_.isTrue(Optin.cookie.get(this.cookie_key+"_success_"+inc_opt.page_id)):"no_show_all"===this.data.content.after_subscription&&(t=!_.isTrue(Optin.cookie.get(this.cookie_key+"_success")))),t},get_expiration_days:function(){switch(this.settings.expiration_unit){case"months":return 30*this.expiration;case"weeks":return 7*this.expiration;case"hours":return this.expiration/24;case"minutes":return this.expiration/1440;case"seconds":return this.expiration/86400;default:return this.expiration}},render:function(){void 0===this.data.unique_id&&(this.data.unique_id="");var t=(parseInt(this.data.content.use_email_collection,10)?Optin.template("wpmudev-hustle-modal-with-optin-tpl"):Optin.template("wpmudev-hustle-modal-without-optin-tpl"))(this.data);if(this.$el.addClass("module_id_"+this.module_id),this.$el.html(t),void 0!==this.data.content.args&&null!==this.data.content.args&&void 0!==this.data.content.active_email_service){var e=Optin.template("optin-"+this.data.content.active_email_service+"-"+this.module_id+"-args-tpl")(this.data.content.args),i=this.$(".hustle-modal-provider-args-container");i.length&&i.html(e)}return this.$el.appendTo(this.parent),this.$el.display=a.proxy(this,"display"),this.$el.on("hustle_show",a.proxy(this,"on_module_show")),this.$el.on("hustle_hide",a.proxy(this,"on_module_hide")),this.$el.data(this.data),this.html=this.$el.html(),this.prepare_display(),"function"==typeof this[this.appear_after+"_trigger"]&&this[this.appear_after+"_trigger"](),this},prepare_display:function(){this.viewed=!0,this.$el.is("."+this.showClass)||this.$el.html(this.html)},display:function(){var e=this;if(!this.$el.is("."+this.showClass)&&(this.$el.removeClass(this.settings.animation_out),this.add_mask(),this.$el.trigger("hustle_show",this),a(document).on("keydown",a.proxy(this.escape_key,this)),!parseInt(this.data.content.use_email_collection,10))){var t=this.data.settings.on_submit;void 0!==this.data.type?this.data.type:this.data.module_type;"close"===t||"default"===t?(0<this.$el.find("form.wpcf7-form").length?this.$el.on("wpcf7mailsent",function(t){setTimeout(function(){e.close()},2e3)}):this.$el.find("form").on("submit",_.bind(this.close,this)),this.handle_compatibility()):"redirect"===t&&this.$el.find("form").on("submit",_.bind(this.redirect_form_submit,this))}},add_mask:function(){var t=!_.isTrue(this.settings.allow_scroll_page),e=!_.isTrue(this.settings.not_close_on_background_click);"popup"!==this.data.module_type||0<this.$el.find(".wph-modal-mask").length||(t&&a("html").addClass("hustle-no-scroll"),this.mask=a('<div class="'+this.maskClass+' ">'),this.mask.insertBefore(this.$el.find(".hustle-modal")),e&&this.mask.on("click",a.proxy(this,"close")))},time_trigger:function(){if(_.isTrue(this.triggers.on_time)){var t=1e3*parseInt(this.triggers.on_time_delay,10);"minutes"===this.triggers.on_time_unit?t*=60:"hours"===this.triggers.on_time_unit&&(t*=3600),_.delay(a.proxy(this,"display"),t)}else this.display()},click_trigger:function(){var t,e=this;""!==(t=a.trim(this.triggers.on_click_element))&&(a(t).length&&a(s).on("click",t,function(t){t.preventDefault(),e.display()}));a(s).on("click",".hustle_module_shortcode_trigger",function(t){t.preventDefault(),a(this).data("id")==e.data.module_id&&a(this).data("type")==e.type&&e.display()})},scroll_trigger:function(){var t=this,e=!1;if("scrolled"===this.triggers.on_scroll&&a(n).scroll(_.debounce(function(){e||100*n.pageYOffset/a(s).height()>=parseFloat(t.triggers.on_scroll_page_percent)&&(t.display(),e=!0)},50)),"selector"===this.triggers.on_scroll){var i=a(this.triggers.on_scroll_css_selector);i.length&&a(n).scroll(_.debounce(function(){e||n.pageYOffset>=i.position().top&&(t.display(),e=!0)},50))}},scrolled_trigger:function(){return this.scroll_trigger()},exit_intent_trigger:function(){var e=this,t=0;_.isTrue(this.triggers.on_exit_intent_delayed)&&(t=1e3*parseInt(this.triggers.on_exit_intent_delayed_time,10),"minutes"===this.triggers.on_exit_intent_delayed_time?t*=60:"hours"===this.triggers.on_exit_intent_delayed_time&&(t*=3600)),_.isTrue(this.triggers.on_exit_intent_per_session)?a(s).on("mouseleave",_.debounce(function(t){a("input").is(":focus")||(e.set_exit_timer(),a(this).off(t))},300)):a(s).on("mouseleave",_.debounce(function(t){a("input").is(":focus")||e.set_exit_timer()},300)),a("html").on("mousemove",_.debounce(function(t){e.reset_exit_timer()},300)),this.exit_timer=null,this.reset_exit_timer=function(){e.exit_timer&&clearTimeout(e.exit_timer)},this.set_exit_timer=function(){e.exit_timer=setTimeout(function(){e.exit_timer=null,e.display()},t)}},adblock_trigger:function(){if(!a("#hustle_optin_adBlock_detector").length&&_.isTrue(this.triggers.on_adblock))if(_.isFalse(this.triggers.on_adblock_delayed))this.display();else{var t=1e3*parseInt(this.triggers.on_adblock_delayed_time,10);"minutes"===this.triggers.on_adblock_delayed_unit?t*=60:"hours"===this.triggers.on_adblock_delayed_unit&&(t*=3600),_.delay(a.proxy(this,"display"),t)}},on_module_show:function(){this.$el.addClass("wph-modal-active"),this.$el.attr("data-id",this.data.module_id),this.$el.attr("data-type",this.data.module_type),this.on_animation_in(),a(document).trigger("hustle:module:displayed",[this.data])},on_module_hide:function(){a(document).trigger("wpoi:hide",[this.type,this.$el,this.opt])},on_animation_in:function(){var t=this,e=this.$el.find(".hustle-modal"),i=this.data.settings.animation_in;this.$el.hasClass("wph-modal-active")&&e.hasClass("hustle-animated")?setTimeout(function(){"no_animation"===i?e.addClass("hustle-modal-static"):e.addClass("hustle-animate-"+i),t.apply_custom_size()},100):(e.addClass("hustle-modal-static"),t.apply_custom_size())},apply_custom_size:function(){Optin.apply_custom_size(this.data,this.$el)},close:function(t){void 0!==t&&t.stopPropagation(),this.clear_running_compat_interval();var e=this,i=this.$el.find(".hustle-modal"),s="hustle-animate-"+this.data.settings.animation_in,n="hustle-animate-"+this.data.settings.animation_out,o=1e3;i.hasClass("hustle-animated")&&("no_animation"===this.data.settings.animation_in?i.removeClass("hustle-modal-static").addClass(n):i.removeClass(s).addClass(n),"fadeOut"===this.data.settings.animation_out&&(o=305),"newspaperOut"===this.data.settings.animation_out&&(o=505),"bounceOut"===this.data.settings.animation_out&&(o=755),0!==this.data.settings.animation_out.length&&"no_animation"!==this.data.settings.animation_out||(o=0),setTimeout(function(){e.$el.removeClass("wph-modal-active"),i.removeClass(n)},o)),i.hasClass("hustle-modal-static")&&setTimeout(function(){i.removeClass("hustle-modal-static"),e.$el.removeClass("wph-modal-active")},0),a("html").removeClass("hustle-no-scroll"),a(document).off("keydown",a.proxy(e.escape_key,this)),"no_show_on_post"===this.settings.after_close?0<parseInt(inc_opt.page_id,10)&&Optin.cookie.set(this.cookie_key+"_"+inc_opt.page_id,this.module_id,this.expiration_days):"no_show_all"===this.settings.after_close&&Optin.cookie.set(this.cookie_key,this.module_id,this.expiration_days),i.find("iframe").each(function(){a(this).attr("src",a(this).attr("src"))})},escape_key:function(t){27===t.keyCode&&this.close(t)},redirect_form_submit:function(t){var e=a(t.target);window.location.replace(e.attr("action"))},handle_compatibility:function(){var e=this,t=this.$el.find("form#subscribes_form"),i=1e3;t.length&&(e.wait_enewsletter_result=setInterval(function(){i+=1e3;var t=e.$el.find("#message");_.isEmpty(t.text().trim())&&216e6!==i||e.close()},1e3))},clear_running_compat_interval:function(){void 0!==this.wait_enewsletter_result&&clearInterval(this.wait_enewsletter_result)},cta_clicked:function(t){if("embedded"!==this.module_type&&void 0!==Optin.Module_log_cta_conversion){var e=new Optin.Module_log_cta_conversion;e.set("type",this.module_type),e.set("module_type",this.module_type),e.set("module_id",this.module_id),e.save()}}}))}(jQuery,document,window),function(h){"use strict";(Optin=Optin||{}).Hustle_Embeddeds={render_hustle_module_embeds:function(t){var u=this;h(".hustle_module_after_content_wrap, .hustle_module_widget_wrap, .hustle_module_shortcode_wrap").each(function(){var t=h(this),i=t.data("id"),e=t.data("type"),s=t.data("unique_id"),n="1"===hustle_vars.is_admin;if(i){var o=_.find(Modules,function(t,e){return i===parseInt(t.module_id)});if(o){if(null!==o.test_types){if(void 0!==o.test_types&&void 0!==o.test_types[e]&&(o.test_types[e]||"true"===o.test_types[e])&&!n)return;void 0!==o.test_types&&void 0!==o.test_types[e]&&(o.test_types[e]||"true"===o.test_types[e])&&n&&(o.settings[e+"_enabled"]="true")}if(_.isTrue(o.settings[e+"_enabled"])){var a=!0,r=Optin.EMBEDDED_COOKIE_PREFIX+i+"_success";if("no_show_on_post"===o.content.after_subscription?a=!(0<parseInt(inc_opt.page_id,10))||!_.isTrue(Optin.cookie.get(r+"_"+inc_opt.page_id)):"no_show_all"===o.content.after_subscription&&(a=!_.isTrue(Optin.cookie.get(r))),a){o.content.cta_url&&(/^(f|ht)tps?:\/\//i.test(o.content.cta_url)||(o.content.cta_url="http://"+o.content.cta_url)),void 0===s&&(s=""),o.unique_id=s;var l=parseInt(o.content.use_email_collection,10)?Optin.template("wpmudev-hustle-modal-with-optin-tpl"):Optin.template("wpmudev-hustle-modal-without-optin-tpl");if(t.html(l(o)),void 0!==o.content.args&&null!==o.content.args&&void 0!==o.content.active_email_service){var d=Optin.template("optin-"+o.content.active_email_service+"-"+o.module_id+"-args-tpl")(o.content.args),c=h(".module_id_"+o.module_id+" .hustle-modal-provider-args-container");c.length&&c.html(d)}o.type=e,u.on_animation_in(o,t),o.type="embedded",o.display_type=e,h(document).trigger("hustle:module:displayed",o),t.find("a.hustle-modal-cta").on("click",function(){if(void 0!==Optin.Module_log_cta_conversion){var t=new Optin.Module_log_cta_conversion;t.set("type",e),t.set("module_type","embedded"),t.set("module_id",i),t.save()}}),t.find(".hustle-modal-close").hide()}}}}})},on_animation_in:function(t,e){var i=e.find(".hustle-modal"),s=t.settings.animation_in;i.hasClass("hustle-animated")?setTimeout(function(){i.addClass("hustle-animate-"+s),Optin.apply_custom_size(t,e)},100):Optin.apply_custom_size(t,e)}},_.delay(function(){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!1)},500),Hustle.Events.on("upfront:editor:widget:render",function(t){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!0)}),Hustle.Events.on("upfront:editor:shortcode:render",function(t){Optin.Hustle_Embeddeds.render_hustle_module_embeds(!0)})}(jQuery),function(t,e,i){"use strict";inc_opt.is_upfront||((Optin=window.Optin||{}).PopUp=Optin.Module.extend({className:"wph-modal",type:"popup"}))}(jQuery,document,window),function(t,e,i){"use strict";inc_opt.is_upfront||((Optin=window.Optin||{}).SlideIn=Optin.Module.extend({className:"wph-modal",type:"slidein",prevent_hide_after:!1,delay_time:0,render:function(){var t="inc_opt_slidein inc_opt_slidein_"+this.settings.display_position+" inc_optin wpoi-slide";this.delay_time=this.convert_to_microseconds(this.settings.auto_hide_time,this.settings.auto_hide_unit),this.$el.addClass(t),Optin.Module.prototype.render.apply(this,arguments)},convert_to_microseconds:function(t,e){return"seconds"===e?1e3*parseInt(t,10):"minutes"===e?60*parseInt(t,10)*1e3:60*parseInt(t,10)*60*1e3},on_module_show:function(){if(this.mask&&this.mask.removeClass("wpoi-show"),_.isTrue(this.settings.auto_hide)){var t=this;_.delay(function(){t.prevent_hide_after||t.on_animation_out()},this.delay_time)}Optin.Module.prototype.on_module_show.apply(this,arguments)},on_module_hide:function(){var t=!1;"hide_all"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_HIDE_ALL,this.optin_id,30),t=!0),"no_show"===this.settings.after_close&&(Optin.cookie.set(Optin.SLIDE_IN_COOKIE_PREFIX+this.optin_id,this.optin_id,30),t=!0),t&&(this.mask&&this.mask.remove(),this.remove())},click:function(){this.prevent_hide_after=!0},on_animation_in:function(){var t=this,e=this.$el.find(".hustle-modal"),i=this.get_slide_in_direction(this.settings.display_position,"in");setTimeout(function(){e.addClass("hustle-animate-slideIn"+i),t.apply_custom_size()},100)},close:function(t){t.stopPropagation(),this.on_animation_out(),"no_show_on_post"===this.settings.after_close?0<parseInt(inc_opt.page_id,10)&&Optin.cookie.set(this.cookie_key+"_"+inc_opt.page_id,this.module_id,this.expiration_days):"no_show_all"===this.settings.after_close&&Optin.cookie.set(this.cookie_key,this.module_id,this.expiration_days)},on_animation_out:function(){var t=this,e=this.get_slide_in_direction(this.settings.display_position,"out"),i=this.$el.find(".hustle-modal"),s="hustle-animate-slideIn"+e,n="hustle-animate-slideOut"+e;i.removeClass(s).addClass(n),setTimeout(function(){t.$el.removeClass("wph-modal-active"),i.removeClass(n)},1e3)},get_slide_in_direction:function(t,e){return"nw"===t||"w"===t||"sw"===t?"Left":"ne"===t||"e"===t||"se"===t?"Right":"s"===t&&"in"===e||"n"===t&&"out"===e?"Up":"Down"}}))}(jQuery,document,window),function(r,t,e){"use strict";var l=window.Optin||{};l.SS_log_view=Backbone.Model.extend({url:inc_opt.ajaxurl+"?action=module_viewed",defaults:{page_type:inc_opt.page_type,page_id:inc_opt.page_id,type:"",uri:encodeURI(window.location.href),module_type:"social_sharing"},parse:function(t){t.success?console.log("Log success!"):console.log("Log failed!")}}),l.SS_log_conversion=l.SS_log_view.extend({url:inc_opt.ajaxurl+"?action=hustle_sshare_converted"}),l.SShare_native_share_enpoints={facebook:"https://www.facebook.com/sharer/sharer.php?u=",twitter:"https://twitter.com/intent/tweet?url=",google:"https://plus.google.com/share?url=",pinterest:"https://www.pinterest.com/pin/create/button/?url=",reddit:"https://www.reddit.com/submit?url=",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url=",vkontakte:"https://vk.com/share.php?url="},l.SShare=Backbone.View.extend({template:l.template("hustle-sshare-front-tpl"),events:{"click a.hustle-social-icon-native":"click_social_native","click a.hustle-social-icon-custom":"click_social_linked"},initialize:function(t){this.opts=t,this.module_id=t.module_id,this.module_type="social_sharing",this.content=t.content,this.design=t.design,this.settings=t.settings,this.is_compat=void 0!==t.is_compat,void 0!==t.parent&&(this.parent=t.parent),this.model_json=_.extend({module_id:this.module_id,module_display_type:this.module_display_type},this.content,this.design,this.settings),this.render()},render:function(t){var e=this.parent,i=this.model_json.location_align_x,s=this.model_json.location_align_y,n=_.templateSettings;if(this.is_compat&&(l.global_mixin(),_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}),this._handle_icons_order(),this.setElement(this.template(_.extend({},this.model_json))),"floating_social"===this.module_display_type&&(e="content"===this.model_json.location_type?r("#content"):"selector"===this.model_json.location_type?r(this.model_json.location_target):r("body")),0!=e.length){if(this.$el.appendTo(e),"floating_social"===this.module_display_type){var o=r(".hustle-sshare-module-id-"+this.model_json.module_id);"left"===i?o.css("left",this.model_json.location_left+"px"):o.css("right",this.model_json.location_right+"px"),"top"===s?o.css("top",this.model_json.location_top+"px"):(o.css("top","auto"),o.css("bottom",this.model_json.location_bottom+"px"))}this.is_compat&&(_.templateSettings=n),this.html=this.$el.html(),this.log_view(this.module_display_type,this.opts),this.update_network_shares()}},update_network_shares:function(){_.delay(function(){r.ajax({type:"POST",url:inc_opt.ajaxurl,dataType:"json",data:{action:"update_network_shares",page_id:inc_opt.page_id}})},5e3)},_handle_icons_order:function(){var e={},s=this.model_json.social_icons,t=this.model_json.icons_order,i=t.split(",");t&&i.length&&(_.each(i,function(i,t){void 0!==s[i]&&(e[i]=s[i],s=_.pick(s,function(t,e){if(i!==e)return t}))}),Object.keys(s).length&&(e=_.extend(e,_.pick(s,function(t,e){if(void 0!==t)return t}))),this.model_json.social_icons=e)},sanitize_url:function(t){return t&&(/^(f|ht)tps?:\/\//i.test(t)||(t="http://"+t)),t},click_social_native:function(t){t.preventDefault();var e=this,i=this.$(t.target).closest("a.hustle-social-icon-native"),s=i.data("social");i.hasClass("hustle-social-icon-counter-native")?(this._add_check_native_social_counter(i),r('a[data-social="'+s+'"].hustle-social-icon-counter-native').not(i).each(function(){e._add_check_native_social_counter(r(this))})):(this._update_social_counter(i),r('a[data-social="'+s+'"]').not(i).not(".hustle-social-icon-counter-native").each(function(){e._update_social_counter(r(this))})),this.log_conversion(this.module_display_type,this.opts,s,"native"),s&&void 0!==l.SShare_native_share_enpoints[s]&&window.open(l.SShare_native_share_enpoints[s]+hustle_vars.current_url,"MsgWindow","menubar=no,toolbar=no,resizable=yes,scrollbars=yes")},click_social_linked:function(t){var e=this.$(t.target).closest("a.linked-social-share").data("social");null!=this.opts.tracking_types&&_.isTrue(this.opts.tracking_types[this.module_display_type])&&this.log_conversion(this.module_display_type,this.opts,e,"linked")},_update_social_counter:function(i){_.delay(function(){var t=i.find(".hustle-shares-counter span");if(t.length){var e=parseInt(t.text())+1;t.text(e)}},5e3)},_add_check_native_social_counter:function(e){_.delay(function(){var t=e.find(".hustle-shares-counter span");if(t.length){t.html('<svg xmlns="http://www.w3.org/2000/svg" width="50" height="38" viewBox="0 0 50 38" preserveAspectRatio="xMaxYMax" class="hustle-icon hustle-i_checkmark"><path class="hustle-icon-path" d="M45.114.46c-.61-.614-1.604-.614-2.21 0L19.607 23.65c-.61.618-1.607.618-2.213 0L7.186 13.254c-.302-.308-.698-.46-1.096-.462-.402-.002-.81.15-1.116.462L.464 17.31c-.3.307-.464.693-.464 1.095 0 .404.163.827.465 1.134l10.293 10.8c.608.617 1.606 1.617 2.213 2.23l4.426 4.46c.61.61 1.602.61 2.213 0L49.54 7.15c.61-.61.61-1.617 0-2.23L45.114.46z"></path></svg>')}},5e3)},log_view:function(t,e){if(null!=e.tracking_types&&_.isTrue(e.tracking_types[t])&&void 0!==l.SS_log_view){var i=new l.SS_log_view;i.set("type",t),i.set("module_id",e.module_id),i.save()}if(!window.hasOwnProperty("optin_vars")){var s=Hustle.consts.Module_Show_Count+this.module_type+"-"+e.module_id,n=Hustle.cookie.get(s);Hustle.cookie.set(s,n+1,30)}},log_conversion:function(t,e,i,s){var n=!(null==e.tracking_types||!_.isTrue(e.tracking_types[t]));if(void 0!==l.SS_log_conversion){var o=new l.SS_log_conversion;o.set("type",t),o.set("module_id",e.module_id),o.set("source",i+"_icon"),o.set("track",n),o.set("service_type",s),o.save()}}}),l.SShare_floating=l.SShare.extend({module_display_type:"floating_social",display_type:"column"}),l.SShare_widget=l.SShare.extend({module_display_type:"widget",display_type:"row"}),l.SShare_shortcode=l.SShare.extend({module_display_type:"shortcode",display_type:"row"}),l.render_hustle_sshare_module_embeds=function(a){r(".hustle_sshare_module_widget_wrap, .hustle_sshare_module_shortcode_wrap").each(function(){var t=r(this),i=t.data("id"),e=t.data("type"),s="1"===hustle_vars.is_admin;if(i){var n=_.find(Modules,function(t,e){return i===parseInt(t.module_id)});if(n){var o=e+"_enabled";(void 0===n.test_types||null===n.test_types||void 0===n.test_types[e]||!n.test_types[e]&&"true"!==n.test_types[e]||s)&&(void 0!==n.test_types&&null!==n.test_types&&void 0!==n.test_types[e]&&(n.test_types[e]||"true"===n.test_types[e])&&s&&(n.settings[o]="true"),_.isTrue(n.settings[o])&&(n.parent=t,void 0!==a&&a&&(n.is_compat=!0),t.html(""),"widget"===e?new l.SShare_widget(n):new l.SShare_shortcode(n)))}}})},l.render_hustle_sshare_module_embeds(!1),Hustle.Events.on("upfront:editor:widget:render",function(t){l.render_hustle_sshare_module_embeds(!0)}),Hustle.Events.on("upfront:editor:shortcode:render",function(t){l.render_hustle_sshare_module_embeds(!0)})}(jQuery,document,window),function(t,e,i){"use strict";inc_opt.is_upfront||(t(window).on("resize",_.debounce(function(t){Hustle.Events.trigger("hustle_resize")},300)),_.each(Modules,function(t,e){if("popup"===t.module_type)new Optin.PopUp(t);if("slidein"===t.module_type)new Optin.SlideIn(t);if("social_sharing"===t.module_type){var i="1"===hustle_vars.is_admin;if(void 0!==t.test_types&&null!==t.test_types&&void 0!==t.test_types.floating_social&&(t.test_types.floating_social||"true"===t.test_types.floating_social)&&!i)return;if(void 0!==t.test_types&&null!==t.test_types&&void 0!==t.test_types.floating_social&&(t.test_types.floating_social||"true"===t.test_types.floating_social)&&i&&(t.settings.floating_social_enabled="true"),_.isTrue(t.settings.floating_social_enabled))new Optin.SShare_floating(t)}}))}(jQuery,document,window);
//# sourceMappingURL=maps/front.min.js.map
